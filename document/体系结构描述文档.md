# 体系结构描述文档

## 目录

[TOC]

## 更新历史

| 修改人员 | 日期         | 变更原因             | 版本号  |
| ---- | ---------- | ---------------- | ---- |
| 廖均达  | 2017.10.11 | 完成逻辑包图与开发包图设计    | 0.01 |
| 訾源   | 2017.10.17 | 修正逻辑包和开发包设计的重大失误 |      |

## 引言

### 编制目的

本报告详细完成对灯具照明行业进销存系统的概要设计，达到指导详细设计和开发的目的，同时实现测试人员及用户的沟通。
本报告面向开发人员、测试人员及最终用户编写，是了解系统的导航。

## 产品概述

参考灯具照明行业进销存系统用例文档和灯具照明行业进销存系统软件规格说明中对产品的概括描述。

## 逻辑视角

灯具照明行业进销存系统中，选择了分层体系结构的风格，将系统分为3层（展示层、业务逻辑层、数据层）能够很好的示意整个高层抽象。展示层包括GUI页面的实现，业务逻辑层包含业务逻辑处理的实现，数据层负责数据的持久化和访问。分层体系结构的逻辑视角和逻辑设计方案如图1和图二所示。

- 图一

![包图表达逻辑视角](包图表达逻辑视角.png)

- 图二

![](逻辑包图.png)

## 组合视角

### 开发包图

灯具照明行业灯具进销存系统的最终开发包设计如下表所示

| 开发（物理）包               | 依赖的其他开发包                                 |
| --------------------- | ---------------------------------------- |
| mainui                | commodityui repositoryui customerui documentui accountui userui approvalui promotionui logui |
| commodityui           | commodityblservice javafx vo             |
| commodityblservice    | Javarmi vo                               |
| commoditybl           | commodityblservice commoditydataservice po |
| commoditydataservice  | commoditydata po                         |
| commoditydata         | databaseutility po                       |
| repositoryui          | repositoryblservice javafx               |
| repositoryblservice   | Javarmi vo                               |
| repositorybl          | commoditybl repositoryblservice repositorydataservice po documentbl |
| repositorydataservice | repositorydata po                        |
| repositorydata        | po databaseutility                       |
| customerui            | customerblservice vo javafx              |
| customerbl            | customerblservice customerdataservice po documentbl |
| customerblservice     | Javarmi                                  |
| customerdata          | databaseutility customerdataservice po   |
| customerdataservice   | po                                       |
| documentui            | documentblservice vo javafx commodityui  |
| documentbl            | documentblservice documentdataservice po userbl |
| documentblservice     | Javarmi                                  |
| documentdata          | databaseutility documentdataservice po   |
| documentdataservice   | po                                       |
| accountui             | accountblservice javafx vo               |
| accountblservice      | Javarmi vo                               |
| accountbl             | acccountblservice accountdataservice po  |
| accountdataservice    | po                                       |
| accountdata           | accountdataservice po databaseutility    |
| userui                | userblservice javafx                     |
| userblservice         | Javarmi vo                               |
| userbl                | userblservice userdataservice po         |
| userdataservice       | po                                       |
| userdata              | userdataservice po databaseutility       |
| approvalui            | javafx, approvalblservice, vo            |
| approvalblservice     | Javarmi , vo                             |
| approvalbl            | approvalblservice, approvaldataservice, documentbl, po |
| approvaldataservice   | po                                       |
| approvaldata          | approvaldataservice, po, databaseutility |
| promotionui           | javafx, promotionblservice,vo            |
| promotionblservice    | javarmi,vo                               |
| promotionbl           | promtionblservice,  promtiondataservice, commoditybl, po |
| promotiondataservice  | po                                       |
| promotiondata         | promotiondataservice, po, databaseutility |
| logui                 | javafx, logblservice, vo                 |
| logblservice          | javarmi, vo                              |
| logbl                 | logblservice, logdataservice, po         |
| logdataservice        | po                                       |
| logdata               | logdataservice, po, databaseutility      |
| javarmi               |                                          |
| javafx                |                                          |
| databaseutility       | JDBC                                     |

- 客户端开发包图

![客户端开发包图](客户端开发包图.png)

- 服务器端开发包图

![服务器端开发包图](服务器端开发包图.png)

## 接口视角

### 模块的职责

### 用户界面层的分解

### 业务逻辑层的分解

#### 业务逻辑层模块的职责

待添加

#### 业务逻辑模块的接口规范

##### accountbl 模块的接口规范

- 提供的服务

  | 名称                     | 条目   | 详情                                       |
  | ---------------------- | ---- | ---------------------------------------- |
  |                        | 语法   | `public ArrayList<AccountVO> getAccountList ()` |
  | Account.getAccountList | 前置条件 | 得到数据                                     |
  |                        | 后置条件 | 返回账户列表                                   |
  |                        | 语法   | `public ResultMessage addAccount(String name, String amount)` |
  | Account.addAccount     | 前置条件 | 金额，名称符合输入规则                              |
  |                        | 后置条件 | 增加新的账户，更新持久化存储内容                         |
  |                        | 语法   | `public ArrayList<AccountVO> findAccount(String keyword)` |
  | Account.findAccount    | 前置条件 | 输入有效的关键字                                 |
  |                        | 后置条件 | 根据关键字查找是否存在相应的账户，若存在匹配的账户则返回相应`Account`对象，若不存在匹配项则返回`null` |
  |                        | 语法   | `public AccountVO getAccount(String id)` |
  | Account.getAccount     | 前置条件 | 输入有效的账户名称                                |
  |                        | 后置条件 | 得到数据，返回名称对应的`Account`对象                  |
  |                        | 语法   | `public ResultMessage deleteAccount(String id)` |
  | Account.deleteAccount  | 前置条件 | 输入有效的账户名称                                |
  |                        | 后置条件 | 删除相应的账户，更新持久化存储内容                        |
  |                        | 语法   | `public ResultMessage modifyAccount(AccountVO vo)` |
  | Account.modifyAccount  | 前置条件 | 输入有效的账户名称                                |
  |                        | 后置条件 | 更改所修改的账户名称，更新持久化存储的数据                    |

- 需要的服务（需接口）

  | 服务名                                     | 服务                 |
  | --------------------------------------- | ------------------ |
  | AccountDataService.getAll()             | 得到目前存储的所有账户的持久化对象  |
  | AccountDataService.get(String id)       | 根据ID得到单一持久对象       |
  | AccountDataService.insert(AccountPO po) | 插入单一持久化对象          |
  | AccountDataService.update(AccountPO po) | 更新单一持久化对象          |
  | AccountDataService.delete(AccountPO po) | 删除单一持久化对象          |
  | AccountDataService.find(String keyword) | 根据关键字查找多个持久化对象     |
  | DataBaseFactory.getAccountDataBase      | 得到Account数据库的服务的引用 |

  ​

