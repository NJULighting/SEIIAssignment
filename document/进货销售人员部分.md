####业务逻辑层模块的职责

| 模块         | 职责                                       |
| ---------- | ---------------------------------------- |
| Customerbl | 负责实现客户管理过程中所需要的服务                        |
| Documentbl | 负责实现制定各种单据（进货单，进货退货单，销售单，销售退货单）时所需要的服务各种单据 |



#### 业务逻辑层模块的接口规范

##### Customerbl 模块的接口规范

- 提供的服务（供接口）

| 名称                       | 条目   | 详情                                       |
| ------------------------ | ---- | ---------------------------------------- |
|                          | 语法   | `public Arraylist<customer> getCustomerList ()` |
| Customer.getCustomerList | 前置条件 | 在客户管理进程中                                 |
|                          | 后置条件 | 返回客户列表                                   |
|                          | 语法   | `public boolean addCustomer(CustomerPO customer)` |
| Customer.addCustomer     | 前置条件 | 已允许增加客户，并已输入有效的客户信息                      |
|                          | 后置条件 | 增加新的客户信息，更新持久化储存的数据                      |
|                          | 语法   | `public ArrayList<CustomerPO> findCustomer(String keyword)` |
| Customer.findCustomer    | 前置条件 | 在查找客户里输入有效的关键字                           |
|                          | 后置条件 | 根据关键字进行模糊查找是否存在相应的客户，若存在匹配的客户则返回`CustomerPO`对象列表，若不存在匹配项则返回空列表 |
|                          | 语法   | `public boolean deleteCustomer(CustomerPO customer)` |
| Customer.deleteCustomer  | 前置条件 | 选定需要删除的客户                                |
|                          | 后置条件 | 删除相应的`Customer`对象，更新持久化存储的数据             |
|                          | 语法   | `public boolean  modifyCustomer(CustomerPO customer)` |
| Customer.modifyCustomer  | 前置条件 | 已输入更改后的有效的客户信息                           |
|                          | 后置条件 | 根据客户编号和输入的信息更改对应`Customer`对象数据，更新持久化存储的数据 |


- 需要的服务（需接口）
| 服务名                                      | 服务                  |
| ---------------------------------------- | ------------------- |
| CustomerDataService.getAll()             | 得到目前存储的所有的持久化对象     |
| CustomerDataService.find(String keyword) | 根据关键字模糊查找得到多个持久化对象  |
| CustomerDataService.insert(CustomerPO po) | 插入一个持久化对象           |
| CustomerDataService.delete(CustomerPO po) | 删除一个持久化对象           |
| CustomerDataService.update(CustomerPO po) | 更新一个持久化对象           |
| DataserviceFactory.getCustomerDatabase   | 得到Customer数据库的服务的引用 |
| CustomerDataService.insert(CustomerPO po) | 在数据库中插入CustomerPO对象 |



##### Documentbl 模块的接口规范

- 提供的服务

| 名称                               | 条目   | 详情                                       |
| -------------------------------- | ---- | ---------------------------------------- |
|                                  | 语法   | `public boolean addStockDoc(StockDocPO stockDoc)` |
| StockDoc.addStockDoc             | 前置条件 | 已在新建进货单进程中，且已经输入有效的进货单信息：单据编号，供应商，仓库，操作员，入库商品列表，备注，总额合计 |
|                                  | 后置条件 | 新建进货单，增加库存，并更新持久化数据                      |
|                                  | 语法   | `public boolean addStockReturnDoc(StockReturnDocPO stockReturnDoc)` |
| StockReturnDoc.addStockReturnDoc | 前置条件 | 已在新建进货退货单进程中，且已经输入有效的进货退货单信息：单据编号，供应商，仓库，操作员，入库商品列表，备注，总额合计 |
|                                  | 后置条件 | 新建进货退货单，减少库存，并更新持久化数据                    |
|                                  | 语法   | `public boolean addSaleDoc(SaleDocPO saleDoc)` |
| SalesDoc.addSaleDoc              | 前置条件 | 已在新建进货单进程中，且已经输入有效的进货单信息:单据编号，客户，业务员，操作员，仓库，出货商品清单，折让前总额，折让，使用代金卷金额，折让后总额，备注 |
|                                  | 后置条件 | 新建进货单，减少库存，并更新持久化数据                      |
|                                  | 语法   | `public boolean addSaleReturnDoc(SaleReturnDocPO saleReturnDoc)` |
| SalesReturnDoc.addSaleReturnDoc  | 前置条件 | 已在新建进货单进程中，且已经输入有效的进货单信息:单据编号，客户，业务员，操作员，仓库，出货商品清单，折让前总额，折让，使用代金卷金额，折让后总额，备注 |
|                                  | 后置条件 | 新建进货单，增加库存，并更新持久化数据                      |
|                                  | 语法   | `public boolean modify(DocPO po)`        |
| Doc.modify                       | 前置条件 | 最高权限修改单据或单据尚未批准                          |
|                                  | 后置条件 | 更新单据，更新持久化数据                             |

- 需要的服务（需接口）
| 服务名                                      | 服务                    |
| ---------------------------------------- | --------------------- |
| DocDataService.insert(DocPO po)          | 插入一个持久化对象             |
| DocDataService.update(DocPO po)          | 更新一个持久化对象             |
| DataserviceFactory.getDocDatabase        | 得到Doc数据库的服务的引用        |
| repositorydataservice.update(RepositoryChangePO po) | 改变数据库中对应商品库存数量        |
| repositorydataservice.getDocDatabase     | 得到repository数据库的服务的引用 |



####数据层模块的接口规范

#####CustomerDataService提供的接口规范

- 提供的服务

| 名称                         | 条目   | 详情                                       |
| -------------------------- | ---- | ---------------------------------------- |
|                            | 语法   | `public ArrayList<CustomerPO> getAll() ` |
| CustomerDataService.getAll | 前置条件 | 无                                        |
|                            | 后置条件 | 返回所有的CustomerPO                          |
|                            | 语法   | `public CustomerPO find(String keyword) ` |
| CustomerDataService.find   | 前置条件 | 无                                        |
|                            | 后置条件 | 按关键词进行查找返回相应的CustomerPO结果                |
|                            | 语法   | `public void insert(CustomerPO po) `     |
| CustomerDataService.insert | 前置条件 | 同样ID的po在数据库中不存在                          |
|                            | 后置条件 | 在数据库中增加一个po                              |
|                            | 语法   | `public void delete(CustomerPO po)`      |
| CustomerDataService.delete | 前置条件 | 在数据库中存在同样ID的po                           |
|                            | 后置条件 | 删除一个po                                   |
|                            | 语法   | `public void update(CustomerPO po)`      |
| CustomerDataService.update | 前置条件 | 在数据库中存在同样ID的po                           |
|                            | 后置条件 | 更新一个po                                   |
|                            | 语法   | `public void init()`                     |
| CustomerDataService.init   | 前置条件 | 无                                        |
|                            | 后置条件 | 初始化持久化数据库                                |
|                            | 语法   | `public void finish()`                   |
| CustomerDataService.finish | 前置条件 | 无                                        |
|                            | 后置条件 | 结束持久化数据库的使用                              |

#####DocDataService提供的接口规范

- 提供的服务

| 名称                              | 条目   | 详情                                 |
| ------------------------------- | ---- | ---------------------------------- |
|                                 | 语法   | `public boolean update(DocPO doc)` |
| DocDataService.update(DocPO po) | 前置条件 | 同一ID的PO在数据库中存在                     |
|                                 | 后置条件 | 在数据库中更新一个PO的数据                     |
|                                 | 语法   | `public void init()`               |
| DocDataService.init             | 前置条件 | 无                                  |
|                                 | 后置条件 | 初始化持久化数据库                          |
|                                 | 语法   | `public void finish()`             |
| DocDataService.finish           | 前置条件 | 无                                  |
|                                 | 后置条件 | 结束持久化数据库的使用                        |


#####RepositoryDataService提供的接口规范

- 提供的服务

| 名称                           | 条目   | 详情             |
| ---------------------------- | ---- | -------------- |
|                              | 语法   |                |
| RepositoryDataService.update | 前置条件 | 需要更改库存的单据已经过审批 |
|                              | 后置条件 |                |

#### 信息视角

##### 数据库表

数据库中包含User表、Customer表、StockDoc表、StockReturnDoc表、SaleDoc表、SaleReturnDoc表

